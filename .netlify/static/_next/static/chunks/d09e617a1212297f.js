(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75830,586318,e=>{"use strict";var t=e.i(271645),s=e.i(30030),i=e.i(820783),r=e.i(991918),n=e.i(843476);function l(e){let l=e+"CollectionProvider",[a,o]=(0,s.createContextScope)(l),[c,u]=a(l,{collectionRef:{current:null},itemMap:new Map}),d=e=>{let{scope:s,children:i}=e,r=t.default.useRef(null),l=t.default.useRef(new Map).current;return(0,n.jsx)(c,{scope:s,itemMap:l,collectionRef:r,children:i})};d.displayName=l;let h=e+"CollectionSlot",f=(0,r.createSlot)(h),p=t.default.forwardRef((e,t)=>{let{scope:s,children:r}=e,l=u(h,s),a=(0,i.useComposedRefs)(t,l.collectionRef);return(0,n.jsx)(f,{ref:a,children:r})});p.displayName=h;let m=e+"CollectionItemSlot",y="data-radix-collection-item",k=(0,r.createSlot)(m),x=t.default.forwardRef((e,s)=>{let{scope:r,children:l,...a}=e,o=t.default.useRef(null),c=(0,i.useComposedRefs)(s,o),d=u(m,r);return t.default.useEffect(()=>(d.itemMap.set(o,{ref:o,...a}),()=>void d.itemMap.delete(o))),(0,n.jsx)(k,{...{[y]:""},ref:c,children:l})});return x.displayName=m,[{Provider:d,Slot:p,ItemSlot:x},function(s){let i=u(e+"CollectionConsumer",s);return t.default.useCallback(()=>{let e=i.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${y}]`));return Array.from(i.itemMap.values()).sort((e,s)=>t.indexOf(e.ref.current)-t.indexOf(s.ref.current))},[i.collectionRef,i.itemMap])},o]}var a=new WeakMap;function o(e,t){var s,i;let r,n,l;if("at"in Array.prototype)return Array.prototype.at.call(e,t);let a=(s=e,i=t,r=s.length,(l=(n=c(i))>=0?n:r+n)<0||l>=r?-1:l);return -1===a?void 0:e[a]}function c(e){return e!=e||0===e?0:Math.trunc(e)}(class e extends Map{#e;constructor(e){super(e),this.#e=[...super.keys()],a.set(this,!0)}set(e,t){return a.get(this)&&(this.has(e)?this.#e[this.#e.indexOf(e)]=e:this.#e.push(e)),super.set(e,t),this}insert(e,t,s){let i,r=this.has(t),n=this.#e.length,l=c(e),a=l>=0?l:n+l,o=a<0||a>=n?-1:a;if(o===this.size||r&&o===this.size-1||-1===o)return this.set(t,s),this;let u=this.size+ +!r;l<0&&a++;let d=[...this.#e],h=!1;for(let e=a;e<u;e++)if(a===e){let n=d[e];d[e]===t&&(n=d[e+1]),r&&this.delete(t),i=this.get(n),this.set(t,s)}else{h||d[e-1]!==t||(h=!0);let s=d[h?e:e-1],r=i;i=this.get(s),this.delete(s),this.set(s,r)}return this}with(t,s,i){let r=new e(this);return r.insert(t,s,i),r}before(e){let t=this.#e.indexOf(e)-1;if(!(t<0))return this.entryAt(t)}setBefore(e,t,s){let i=this.#e.indexOf(e);return -1===i?this:this.insert(i,t,s)}after(e){let t=this.#e.indexOf(e);if(-1!==(t=-1===t||t===this.size-1?-1:t+1))return this.entryAt(t)}setAfter(e,t,s){let i=this.#e.indexOf(e);return -1===i?this:this.insert(i+1,t,s)}first(){return this.entryAt(0)}last(){return this.entryAt(-1)}clear(){return this.#e=[],super.clear()}delete(e){let t=super.delete(e);return t&&this.#e.splice(this.#e.indexOf(e),1),t}deleteAt(e){let t=this.keyAt(e);return void 0!==t&&this.delete(t)}at(e){let t=o(this.#e,e);if(void 0!==t)return this.get(t)}entryAt(e){let t=o(this.#e,e);if(void 0!==t)return[t,this.get(t)]}indexOf(e){return this.#e.indexOf(e)}keyAt(e){return o(this.#e,e)}from(e,t){let s=this.indexOf(e);if(-1===s)return;let i=s+t;return i<0&&(i=0),i>=this.size&&(i=this.size-1),this.at(i)}keyFrom(e,t){let s=this.indexOf(e);if(-1===s)return;let i=s+t;return i<0&&(i=0),i>=this.size&&(i=this.size-1),this.keyAt(i)}find(e,t){let s=0;for(let i of this){if(Reflect.apply(e,t,[i,s,this]))return i;s++}}findIndex(e,t){let s=0;for(let i of this){if(Reflect.apply(e,t,[i,s,this]))return s;s++}return -1}filter(t,s){let i=[],r=0;for(let e of this)Reflect.apply(t,s,[e,r,this])&&i.push(e),r++;return new e(i)}map(t,s){let i=[],r=0;for(let e of this)i.push([e[0],Reflect.apply(t,s,[e,r,this])]),r++;return new e(i)}reduce(...e){let[t,s]=e,i=0,r=s??this.at(0);for(let s of this)r=0===i&&1===e.length?s:Reflect.apply(t,this,[r,s,i,this]),i++;return r}reduceRight(...e){let[t,s]=e,i=s??this.at(-1);for(let s=this.size-1;s>=0;s--){let r=this.at(s);i=s===this.size-1&&1===e.length?r:Reflect.apply(t,this,[i,r,s,this])}return i}toSorted(t){return new e([...this.entries()].sort(t))}toReversed(){let t=new e;for(let e=this.size-1;e>=0;e--){let s=this.keyAt(e),i=this.get(s);t.set(s,i)}return t}toSpliced(...t){let s=[...this.entries()];return s.splice(...t),new e(s)}slice(t,s){let i=new e,r=this.size-1;if(void 0===t)return i;t<0&&(t+=this.size),void 0!==s&&s>0&&(r=s-1);for(let e=t;e<=r;e++){let t=this.keyAt(e),s=this.get(t);i.set(t,s)}return i}every(e,t){let s=0;for(let i of this){if(!Reflect.apply(e,t,[i,s,this]))return!1;s++}return!0}some(e,t){let s=0;for(let i of this){if(Reflect.apply(e,t,[i,s,this]))return!0;s++}return!1}}),e.s(["createCollection",()=>l],75830);var u=t.createContext(void 0);function d(e){let s=t.useContext(u);return e||s||"ltr"}e.s(["useDirection",()=>d],586318)},87446,e=>{"use strict";async function t(e,s={}){let i=function(){if("undefined"==typeof document)return"";let e=document.cookie.match(/(?:^|; )csrfToken=([^;]+)/);return e?decodeURIComponent(e[1]):""}(),r=new Headers(s.headers||{});return s.method&&"GET"!==s.method.toUpperCase()&&i&&r.set("X-CSRF-Token",i),fetch(e,{...s,headers:r})}e.s(["fetchWithCsrf",()=>t])},319036,e=>{"use strict";var t=e.i(843476),s=e.i(271645),i=e.i(981140),r=e.i(820783),n=e.i(30030),l=e.i(369340),a=e.i(999682),o=e.i(635804),c=e.i(248425),u="Switch",[d,h]=(0,n.createContextScope)(u),[f,p]=d(u),m=s.forwardRef((e,n)=>{let{__scopeSwitch:a,name:o,checked:d,defaultChecked:h,required:p,disabled:m,value:y="on",onCheckedChange:k,form:w,...g}=e,[j,C]=s.useState(null),S=(0,r.useComposedRefs)(n,e=>C(e)),b=s.useRef(!1),R=!j||w||!!j.closest("form"),[N,A]=(0,l.useControllableState)({prop:d,defaultProp:h??!1,onChange:k,caller:u});return(0,t.jsxs)(f,{scope:a,checked:N,disabled:m,children:[(0,t.jsx)(c.Primitive.button,{type:"button",role:"switch","aria-checked":N,"aria-required":p,"data-state":v(N),"data-disabled":m?"":void 0,disabled:m,value:y,...g,ref:S,onClick:(0,i.composeEventHandlers)(e.onClick,e=>{A(e=>!e),R&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})}),R&&(0,t.jsx)(x,{control:j,bubbles:!b.current,name:o,value:y,checked:N,required:p,disabled:m,form:w,style:{transform:"translateX(-100%)"}})]})});m.displayName=u;var y="SwitchThumb",k=s.forwardRef((e,s)=>{let{__scopeSwitch:i,...r}=e,n=p(y,i);return(0,t.jsx)(c.Primitive.span,{"data-state":v(n.checked),"data-disabled":n.disabled?"":void 0,...r,ref:s})});k.displayName=y;var x=s.forwardRef(({__scopeSwitch:e,control:i,checked:n,bubbles:l=!0,...c},u)=>{let d=s.useRef(null),h=(0,r.useComposedRefs)(d,u),f=(0,a.usePrevious)(n),p=(0,o.useSize)(i);return s.useEffect(()=>{let e=d.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(f!==n&&t){let s=new Event("click",{bubbles:l});t.call(e,n),e.dispatchEvent(s)}},[f,n,l]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...c,tabIndex:-1,ref:h,style:{...c.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function v(e){return e?"checked":"unchecked"}x.displayName="SwitchBubbleInput";var w=e.i(647163);let g=s.forwardRef(({className:e,...s},i)=>(0,t.jsx)(m,{className:(0,w.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...s,ref:i,children:(0,t.jsx)(k,{className:(0,w.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));g.displayName=m.displayName,e.s(["Switch",()=>g],319036)},859784,e=>{"use strict";var t=e.i(843476),s=e.i(271645),i=e.i(970065),r=e.i(167881),n=e.i(23750),l=e.i(62870),a=e.i(319036),o=e.i(87446);function c(){let[e,c]=(0,s.useState)([]),[u,d]=(0,s.useState)(""),[h,f]=(0,s.useState)("workflow"),[p,m]=(0,s.useState)(""),[y,k]=(0,s.useState)(60),[x,v]=(0,s.useState)(!0),[w,g]=(0,s.useState)([]),j=async()=>{let e=await fetch("/api/automation/schedules");c((await e.json()).schedules||[]);let t=await fetch("/api/automation/workflows");g((await t.json().catch(()=>({workflows:[]}))).workflows||[])};(0,s.useEffect)(()=>{j()},[]);let C=async()=>{(await (0,o.fetchWithCsrf)("/api/automation/schedules",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:u,type:h,workflow_id:"workflow"===h&&p||null,interval_minutes:y,active:x})})).ok&&(d(""),m(""),k(60),v(!0),await j())},S=async(e,t)=>{(await (0,o.fetchWithCsrf)("/api/automation/schedules",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,...t})})).ok&&await j()},b=async e=>{(await (0,o.fetchWithCsrf)(`/api/automation/schedules?id=${e}`,{method:"DELETE"})).ok&&await j()};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(i.Card,{className:"p-4 space-y-3",children:[(0,t.jsx)("div",{className:"font-medium",children:"Neuen Scheduler anlegen"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[(0,t.jsx)(n.Input,{placeholder:"Name",value:u,onChange:e=>d(e.target.value)}),(0,t.jsxs)(l.Select,{value:h,onValueChange:f,children:[(0,t.jsx)(l.SelectTrigger,{children:(0,t.jsx)(l.SelectValue,{placeholder:"Typ"})}),(0,t.jsxs)(l.SelectContent,{children:[(0,t.jsx)(l.SelectItem,{value:"workflow",children:"Workflow"}),(0,t.jsx)(l.SelectItem,{value:"outreach_queue",children:"Outreach Queue"})]})]}),(0,t.jsx)(n.Input,{type:"number",placeholder:"Intervall (Minuten)",value:y,onChange:e=>k(parseInt(e.target.value||"0"))})]}),"workflow"===h&&(0,t.jsxs)(l.Select,{value:p,onValueChange:m,children:[(0,t.jsx)(l.SelectTrigger,{children:(0,t.jsx)(l.SelectValue,{placeholder:"Workflow auswählen"})}),(0,t.jsx)(l.SelectContent,{children:w.map(e=>(0,t.jsx)(l.SelectItem,{value:e.id,children:e.name},e.id))})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(a.Switch,{checked:x,onCheckedChange:v}),(0,t.jsx)("span",{children:"Aktiv"})]}),(0,t.jsx)(r.Button,{onClick:C,children:"Anlegen"})]}),(0,t.jsxs)(i.Card,{className:"p-4",children:[(0,t.jsx)("div",{className:"font-medium mb-2",children:"Scheduler"}),(0,t.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 items-center",children:[(0,t.jsx)("div",{children:e.name}),(0,t.jsx)("div",{children:e.type}),(0,t.jsx)(n.Input,{type:"number",value:e.interval_minutes||60,onChange:t=>S(e,{interval_minutes:parseInt(t.target.value||"0")})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(a.Switch,{checked:e.active,onCheckedChange:t=>S(e,{active:t})}),(0,t.jsx)("span",{children:"Aktiv"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>b(e.id),children:"Löschen"}),(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>S(e,{last_run_at:null}),children:"Zurücksetzen"})]})]},e.id))})]})]})}e.s(["default",()=>c])}]);