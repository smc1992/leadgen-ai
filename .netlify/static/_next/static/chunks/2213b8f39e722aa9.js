(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75830,586318,e=>{"use strict";var t=e.i(271645),s=e.i(30030),a=e.i(820783),r=e.i(991918),i=e.i(843476);function n(e){let n=e+"CollectionProvider",[l,o]=(0,s.createContextScope)(n),[c,d]=l(n,{collectionRef:{current:null},itemMap:new Map}),u=e=>{let{scope:s,children:a}=e,r=t.default.useRef(null),n=t.default.useRef(new Map).current;return(0,i.jsx)(c,{scope:s,itemMap:n,collectionRef:r,children:a})};u.displayName=n;let h=e+"CollectionSlot",p=(0,r.createSlot)(h),f=t.default.forwardRef((e,t)=>{let{scope:s,children:r}=e,n=d(h,s),l=(0,a.useComposedRefs)(t,n.collectionRef);return(0,i.jsx)(p,{ref:l,children:r})});f.displayName=h;let m=e+"CollectionItemSlot",v="data-radix-collection-item",g=(0,r.createSlot)(m),x=t.default.forwardRef((e,s)=>{let{scope:r,children:n,...l}=e,o=t.default.useRef(null),c=(0,a.useComposedRefs)(s,o),u=d(m,r);return t.default.useEffect(()=>(u.itemMap.set(o,{ref:o,...l}),()=>void u.itemMap.delete(o))),(0,i.jsx)(g,{...{[v]:""},ref:c,children:n})});return x.displayName=m,[{Provider:u,Slot:f,ItemSlot:x},function(s){let a=d(e+"CollectionConsumer",s);return t.default.useCallback(()=>{let e=a.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${v}]`));return Array.from(a.itemMap.values()).sort((e,s)=>t.indexOf(e.ref.current)-t.indexOf(s.ref.current))},[a.collectionRef,a.itemMap])},o]}var l=new WeakMap;function o(e,t){var s,a;let r,i,n;if("at"in Array.prototype)return Array.prototype.at.call(e,t);let l=(s=e,a=t,r=s.length,(n=(i=c(a))>=0?i:r+i)<0||n>=r?-1:n);return -1===l?void 0:e[l]}function c(e){return e!=e||0===e?0:Math.trunc(e)}(class e extends Map{#e;constructor(e){super(e),this.#e=[...super.keys()],l.set(this,!0)}set(e,t){return l.get(this)&&(this.has(e)?this.#e[this.#e.indexOf(e)]=e:this.#e.push(e)),super.set(e,t),this}insert(e,t,s){let a,r=this.has(t),i=this.#e.length,n=c(e),l=n>=0?n:i+n,o=l<0||l>=i?-1:l;if(o===this.size||r&&o===this.size-1||-1===o)return this.set(t,s),this;let d=this.size+ +!r;n<0&&l++;let u=[...this.#e],h=!1;for(let e=l;e<d;e++)if(l===e){let i=u[e];u[e]===t&&(i=u[e+1]),r&&this.delete(t),a=this.get(i),this.set(t,s)}else{h||u[e-1]!==t||(h=!0);let s=u[h?e:e-1],r=a;a=this.get(s),this.delete(s),this.set(s,r)}return this}with(t,s,a){let r=new e(this);return r.insert(t,s,a),r}before(e){let t=this.#e.indexOf(e)-1;if(!(t<0))return this.entryAt(t)}setBefore(e,t,s){let a=this.#e.indexOf(e);return -1===a?this:this.insert(a,t,s)}after(e){let t=this.#e.indexOf(e);if(-1!==(t=-1===t||t===this.size-1?-1:t+1))return this.entryAt(t)}setAfter(e,t,s){let a=this.#e.indexOf(e);return -1===a?this:this.insert(a+1,t,s)}first(){return this.entryAt(0)}last(){return this.entryAt(-1)}clear(){return this.#e=[],super.clear()}delete(e){let t=super.delete(e);return t&&this.#e.splice(this.#e.indexOf(e),1),t}deleteAt(e){let t=this.keyAt(e);return void 0!==t&&this.delete(t)}at(e){let t=o(this.#e,e);if(void 0!==t)return this.get(t)}entryAt(e){let t=o(this.#e,e);if(void 0!==t)return[t,this.get(t)]}indexOf(e){return this.#e.indexOf(e)}keyAt(e){return o(this.#e,e)}from(e,t){let s=this.indexOf(e);if(-1===s)return;let a=s+t;return a<0&&(a=0),a>=this.size&&(a=this.size-1),this.at(a)}keyFrom(e,t){let s=this.indexOf(e);if(-1===s)return;let a=s+t;return a<0&&(a=0),a>=this.size&&(a=this.size-1),this.keyAt(a)}find(e,t){let s=0;for(let a of this){if(Reflect.apply(e,t,[a,s,this]))return a;s++}}findIndex(e,t){let s=0;for(let a of this){if(Reflect.apply(e,t,[a,s,this]))return s;s++}return -1}filter(t,s){let a=[],r=0;for(let e of this)Reflect.apply(t,s,[e,r,this])&&a.push(e),r++;return new e(a)}map(t,s){let a=[],r=0;for(let e of this)a.push([e[0],Reflect.apply(t,s,[e,r,this])]),r++;return new e(a)}reduce(...e){let[t,s]=e,a=0,r=s??this.at(0);for(let s of this)r=0===a&&1===e.length?s:Reflect.apply(t,this,[r,s,a,this]),a++;return r}reduceRight(...e){let[t,s]=e,a=s??this.at(-1);for(let s=this.size-1;s>=0;s--){let r=this.at(s);a=s===this.size-1&&1===e.length?r:Reflect.apply(t,this,[a,r,s,this])}return a}toSorted(t){return new e([...this.entries()].sort(t))}toReversed(){let t=new e;for(let e=this.size-1;e>=0;e--){let s=this.keyAt(e),a=this.get(s);t.set(s,a)}return t}toSpliced(...t){let s=[...this.entries()];return s.splice(...t),new e(s)}slice(t,s){let a=new e,r=this.size-1;if(void 0===t)return a;t<0&&(t+=this.size),void 0!==s&&s>0&&(r=s-1);for(let e=t;e<=r;e++){let t=this.keyAt(e),s=this.get(t);a.set(t,s)}return a}every(e,t){let s=0;for(let a of this){if(!Reflect.apply(e,t,[a,s,this]))return!1;s++}return!0}some(e,t){let s=0;for(let a of this){if(Reflect.apply(e,t,[a,s,this]))return!0;s++}return!1}}),e.s(["createCollection",()=>n],75830);var d=t.createContext(void 0);function u(e){let s=t.useContext(d);return e||s||"ltr"}e.s(["useDirection",()=>u],586318)},842727,e=>{"use strict";var t=e.i(271645),s=e.i(981140),a=e.i(75830),r=e.i(820783),i=e.i(30030),n=e.i(610772),l=e.i(248425),o=e.i(30207),c=e.i(369340),d=e.i(586318),u=e.i(843476),h="rovingFocusGroup.onEntryFocus",p={bubbles:!1,cancelable:!0},f="RovingFocusGroup",[m,v,g]=(0,a.createCollection)(f),[x,y]=(0,i.createContextScope)(f,[g]),[j,S]=x(f),b=t.forwardRef((e,t)=>(0,u.jsx)(m.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,u.jsx)(m.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,u.jsx)(w,{...e,ref:t})})}));b.displayName=f;var w=t.forwardRef((e,a)=>{let{__scopeRovingFocusGroup:i,orientation:n,loop:m=!1,dir:g,currentTabStopId:x,defaultCurrentTabStopId:y,onCurrentTabStopIdChange:S,onEntryFocus:b,preventScrollOnEntryFocus:w=!1,...C}=e,I=t.useRef(null),k=(0,r.useComposedRefs)(a,I),N=(0,d.useDirection)(g),[R,A]=(0,c.useControllableState)({prop:x,defaultProp:y??null,onChange:S,caller:f}),[O,E]=t.useState(!1),F=(0,o.useCallbackRef)(b),M=v(i),D=t.useRef(!1),[P,U]=t.useState(0);return t.useEffect(()=>{let e=I.current;if(e)return e.addEventListener(h,F),()=>e.removeEventListener(h,F)},[F]),(0,u.jsx)(j,{scope:i,orientation:n,dir:N,loop:m,currentTabStopId:R,onItemFocus:t.useCallback(e=>A(e),[A]),onItemShiftTab:t.useCallback(()=>E(!0),[]),onFocusableItemAdd:t.useCallback(()=>U(e=>e+1),[]),onFocusableItemRemove:t.useCallback(()=>U(e=>e-1),[]),children:(0,u.jsx)(l.Primitive.div,{tabIndex:O||0===P?-1:0,"data-orientation":n,...C,ref:k,style:{outline:"none",...e.style},onMouseDown:(0,s.composeEventHandlers)(e.onMouseDown,()=>{D.current=!0}),onFocus:(0,s.composeEventHandlers)(e.onFocus,e=>{let t=!D.current;if(e.target===e.currentTarget&&t&&!O){let t=new CustomEvent(h,p);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=M().filter(e=>e.focusable);T([e.find(e=>e.active),e.find(e=>e.id===R),...e].filter(Boolean).map(e=>e.ref.current),w)}}D.current=!1}),onBlur:(0,s.composeEventHandlers)(e.onBlur,()=>E(!1))})})}),C="RovingFocusGroupItem",I=t.forwardRef((e,a)=>{let{__scopeRovingFocusGroup:r,focusable:i=!0,active:o=!1,tabStopId:c,children:d,...h}=e,p=(0,n.useId)(),f=c||p,g=S(C,r),x=g.currentTabStopId===f,y=v(r),{onFocusableItemAdd:j,onFocusableItemRemove:b,currentTabStopId:w}=g;return t.useEffect(()=>{if(i)return j(),()=>b()},[i,j,b]),(0,u.jsx)(m.ItemSlot,{scope:r,id:f,focusable:i,active:o,children:(0,u.jsx)(l.Primitive.span,{tabIndex:x?0:-1,"data-orientation":g.orientation,...h,ref:a,onMouseDown:(0,s.composeEventHandlers)(e.onMouseDown,e=>{i?g.onItemFocus(f):e.preventDefault()}),onFocus:(0,s.composeEventHandlers)(e.onFocus,()=>g.onItemFocus(f)),onKeyDown:(0,s.composeEventHandlers)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void g.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,s){var a;let r=(a=e.key,"rtl"!==s?a:"ArrowLeft"===a?"ArrowRight":"ArrowRight"===a?"ArrowLeft":a);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(r))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)))return k[r]}(e,g.orientation,g.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let r=y().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)r.reverse();else if("prev"===t||"next"===t){var s,a;"prev"===t&&r.reverse();let i=r.indexOf(e.currentTarget);r=g.loop?(s=r,a=i+1,s.map((e,t)=>s[(a+t)%s.length])):r.slice(i+1)}setTimeout(()=>T(r))}}),children:"function"==typeof d?d({isCurrentTabStop:x,hasTabStop:null!=w}):d})})});I.displayName=C;var k={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function T(e,t=!1){let s=document.activeElement;for(let a of e)if(a===s||(a.focus({preventScroll:t}),document.activeElement!==s))return}e.s(["Item",()=>I,"Root",()=>b,"createRovingFocusGroupScope",()=>y])},127341,e=>{"use strict";var t=e.i(843476),s=e.i(271645),a=e.i(981140),r=e.i(30030),i=e.i(842727),n=e.i(296626),l=e.i(248425),o=e.i(586318),c=e.i(369340),d=e.i(610772),u="Tabs",[h,p]=(0,r.createContextScope)(u,[i.createRovingFocusGroupScope]),f=(0,i.createRovingFocusGroupScope)(),[m,v]=h(u),g=s.forwardRef((e,s)=>{let{__scopeTabs:a,value:r,onValueChange:i,defaultValue:n,orientation:h="horizontal",dir:p,activationMode:f="automatic",...v}=e,g=(0,o.useDirection)(p),[x,y]=(0,c.useControllableState)({prop:r,onChange:i,defaultProp:n??"",caller:u});return(0,t.jsx)(m,{scope:a,baseId:(0,d.useId)(),value:x,onValueChange:y,orientation:h,dir:g,activationMode:f,children:(0,t.jsx)(l.Primitive.div,{dir:g,"data-orientation":h,...v,ref:s})})});g.displayName=u;var x="TabsList",y=s.forwardRef((e,s)=>{let{__scopeTabs:a,loop:r=!0,...n}=e,o=v(x,a),c=f(a);return(0,t.jsx)(i.Root,{asChild:!0,...c,orientation:o.orientation,dir:o.dir,loop:r,children:(0,t.jsx)(l.Primitive.div,{role:"tablist","aria-orientation":o.orientation,...n,ref:s})})});y.displayName=x;var j="TabsTrigger",S=s.forwardRef((e,s)=>{let{__scopeTabs:r,value:n,disabled:o=!1,...c}=e,d=v(j,r),u=f(r),h=C(d.baseId,n),p=I(d.baseId,n),m=n===d.value;return(0,t.jsx)(i.Item,{asChild:!0,...u,focusable:!o,active:m,children:(0,t.jsx)(l.Primitive.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":p,"data-state":m?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:h,...c,ref:s,onMouseDown:(0,a.composeEventHandlers)(e.onMouseDown,e=>{o||0!==e.button||!1!==e.ctrlKey?e.preventDefault():d.onValueChange(n)}),onKeyDown:(0,a.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&d.onValueChange(n)}),onFocus:(0,a.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==d.activationMode;m||o||!e||d.onValueChange(n)})})})});S.displayName=j;var b="TabsContent",w=s.forwardRef((e,a)=>{let{__scopeTabs:r,value:i,forceMount:o,children:c,...d}=e,u=v(b,r),h=C(u.baseId,i),p=I(u.baseId,i),f=i===u.value,m=s.useRef(f);return s.useEffect(()=>{let e=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(n.Presence,{present:o||f,children:({present:s})=>(0,t.jsx)(l.Primitive.div,{"data-state":f?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":h,hidden:!s,id:p,tabIndex:0,...d,ref:a,style:{...e.style,animationDuration:m.current?"0s":void 0},children:s&&c})})});function C(e,t){return`${e}-trigger-${t}`}function I(e,t){return`${e}-content-${t}`}w.displayName=b;var k=e.i(647163);function T({className:e,...s}){return(0,t.jsx)(g,{"data-slot":"tabs",className:(0,k.cn)("flex flex-col gap-2",e),...s})}function N({className:e,...s}){return(0,t.jsx)(y,{"data-slot":"tabs-list",className:(0,k.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...s})}function R({className:e,...s}){return(0,t.jsx)(S,{"data-slot":"tabs-trigger",className:(0,k.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...s})}function A({className:e,...s}){return(0,t.jsx)(w,{"data-slot":"tabs-content",className:(0,k.cn)("flex-1 outline-none",e),...s})}e.s(["Tabs",()=>T,"TabsContent",()=>A,"TabsList",()=>N,"TabsTrigger",()=>R],127341)},87446,e=>{"use strict";async function t(e,s={}){let a=function(){if("undefined"==typeof document)return"";let e=document.cookie.match(/(?:^|; )csrfToken=([^;]+)/);return e?decodeURIComponent(e[1]):""}(),r=new Headers(s.headers||{});return s.method&&"GET"!==s.method.toUpperCase()&&a&&r.set("X-CSRF-Token",a),fetch(e,{...s,headers:r})}e.s(["fetchWithCsrf",()=>t])},174117,e=>{"use strict";var t=e.i(271645);let s=0,a=new Map,r=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},i=[],n={toasts:[]};function l(e){n=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?r(s):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(n,e),i.forEach(e=>{e(n)})}function o({...e}){let t=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>l({type:"DISMISS_TOAST",toastId:t});return l({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function c(){let[e,s]=t.useState(n);return t.useEffect(()=>(i.push(s),()=>{let e=i.indexOf(s);e>-1&&i.splice(e,1)}),[e]),{...e,toast:o,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}e.s(["useToast",()=>c])},702479,e=>{"use strict";var t=e.i(843476),s=e.i(271645),a=e.i(970065),r=e.i(167881),i=e.i(23750),n=e.i(127341),l=e.i(62870),o=e.i(87446),c=e.i(174117);function d(){let[e,d]=(0,s.useState)("maps"),[u,h]=(0,s.useState)(""),[p,f]=(0,s.useState)(""),[m,v]=(0,s.useState)(100),[g,x]=(0,s.useState)(!1),[y,j]=(0,s.useState)(!1),[S,b]=(0,s.useState)(""),[w,C]=(0,s.useState)(""),[I,k]=(0,s.useState)(""),[T,N]=(0,s.useState)("people"),[R,A]=(0,s.useState)(1),[O,E]=(0,s.useState)(1),[F,M]=(0,s.useState)(""),[D,P]=(0,s.useState)(""),[U,_]=(0,s.useState)(""),[B,V]=(0,s.useState)(""),[$,L]=(0,s.useState)(""),[K,z]=(0,s.useState)("any"),[W,G]=(0,s.useState)("messe-berlin"),[H,J]=(0,s.useState)(""),[q,Q]=(0,s.useState)(!1),[X,Y]=(0,s.useState)([]),[Z,ee]=(0,s.useState)({}),et=e=>ee(t=>({...t,[e]:!t[e]})),[es,ea]=(0,s.useState)(""),[er,ei]=(0,s.useState)(""),[en,el]=(0,s.useState)(""),[eo,ec]=(0,s.useState)([]),[ed,eu]=(0,s.useState)(""),{toast:eh}=(0,c.useToast)(),ep=async()=>{try{if(Q(!0),Y([]),!u.trim()&&!p.trim()){Q(!1),eh({title:"Eingabe fehlt",description:"Bitte Suche oder Ort angeben",variant:"destructive"});return}let e=await (0,o.fetchWithCsrf)("/api/scrape",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"maps",params:{searchQuery:u,location:p,limit:m,withWebsiteOnly:g}})}),t=await e.json().catch(()=>({}));if(!e.ok){Q(!1),eh({title:"Scrape fehlgeschlagen",description:t?.apifyMessage||t?.error||`Status ${e.status}`,variant:"destructive"});return}let s=t.runId,a=async()=>{try{let e=await fetch(`/api/scrape?runId=${s}&enrichContacts=${y}`),t=await e.json();"succeeded"===t.status?(Y(t.results||[]),Q(!1)):setTimeout(a,2e3)}catch(e){Q(!1),eh({title:"Status fehlgeschlagen",description:e?.message||"Unbekannter Fehler",variant:"destructive"})}};a()}catch(e){Q(!1),eh({title:"Scrape fehlgeschlagen",description:e?.message||"Unbekannter Fehler",variant:"destructive"})}},ef=async()=>{try{Q(!0),Y([]);let e=w;if(!e&&(I||U||D||F||$||K&&"any"!==K)){let t="companies"===T?"https://www.linkedin.com/search/results/companies/?keywords=":"https://www.linkedin.com/search/results/people/?keywords=",s=[I,U,D,F,$,K&&"any"!==K?`employees ${K}`:void 0].filter(Boolean);e=t+encodeURIComponent(s.join(" "))}let t=e?{searchUrl:e,startPage:R,endPage:O}:{profileUrl:S,limit:50};if(!t.searchUrl&&!t.profileUrl){Q(!1),eh({title:"Eingabe fehlt",description:"Such-URL, Keywords oder Profil-URL erforderlich",variant:"destructive"});return}let s=await (0,o.fetchWithCsrf)("/api/scrape",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"linkedin",params:t})}),a=await s.json().catch(()=>({}));if(!s.ok){Q(!1),eh({title:"Scrape fehlgeschlagen",description:a?.apifyMessage||a?.error||`Status ${s.status}`,variant:"destructive"});return}let r=a.runId,i=async()=>{try{let e=await fetch(`/api/scrape?runId=${r}`),t=await e.json();"succeeded"===t.status?(Y(t.results||[]),Q(!1)):setTimeout(i,2e3)}catch(e){Q(!1),eh({title:"Status fehlgeschlagen",description:e?.message||"Unbekannter Fehler",variant:"destructive"})}};i()}catch(e){Q(!1),eh({title:"Scrape fehlgeschlagen",description:e?.message||"Unbekannter Fehler",variant:"destructive"})}},em=async()=>{try{Q(!0),Y([]);let e=B.split(/[\n,\s]+/).map(e=>e.trim()).filter(Boolean);if(0===e.length){Q(!1),eh({title:"Eingabe fehlt",description:"Bitte mindestens eine Email eingeben",variant:"destructive"});return}let t=await (0,o.fetchWithCsrf)("/api/scrape",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"validator",params:{emails:e}})}),s=await t.json().catch(()=>({}));if(!t.ok){Q(!1),eh({title:"Validator fehlgeschlagen",description:s?.apifyMessage||s?.error||`Status ${t.status}`,variant:"destructive"});return}let a=s.runId,r=async()=>{try{let e=await fetch(`/api/scrape?runId=${a}`),t=await e.json();"succeeded"===t.status?(Y(t.results||[]),Q(!1)):setTimeout(r,2e3)}catch(e){Q(!1),eh({title:"Status fehlgeschlagen",description:e?.message||"Unbekannter Fehler",variant:"destructive"})}};r()}catch(e){Q(!1),eh({title:"Validator fehlgeschlagen",description:e?.message||"Unbekannter Fehler",variant:"destructive"})}},ev=async()=>{try{if(Q(!0),Y([]),!H.trim()){Q(!1),eh({title:"Eingabe fehlt",description:"Bitte Parameter eingeben",variant:"destructive"});return}let e=`/api/leads/scrapers/${W}`,t=await (0,o.fetchWithCsrf)(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:H})}),s=await t.json().catch(()=>({}));t.ok?(Y(s.leads||[]),Q(!1)):(Q(!1),eh({title:"Scrape fehlgeschlagen",description:s?.error||`Status ${t.status}`,variant:"destructive"}))}catch(e){Q(!1),eh({title:"Scrape fehlgeschlagen",description:e?.message||"Unbekannter Fehler",variant:"destructive"})}},eg=async()=>{if(!es||0===X.length)return;let e=X.map(e=>({full_name:e.fullName||"",job_title:e.jobTitle||"",company:e.company||"",email:e.email||"",region:e.region||"",channel:e.channel||"scraper",source_url:e.sourceUrl||""}));(await (0,o.fetchWithCsrf)("/api/leads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leads:e,listName:es})})).ok&&ea("")},ex=async()=>{if(!er||!en||0===X.length)return;await fetch("/api/automation/schedules"),await fetch("/api/leads?limit=100");let e={type:"add-leads",data:{campaignId:er,leads:X.filter(e=>e.email).map(e=>({email:e.email||"",firstName:(e.fullName||"").split(" ")[0]||"",lastName:(e.fullName||"").split(" ").slice(1).join(" ")||"",company:e.company||""}))}};(await (0,o.fetchWithCsrf)("/api/email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok&&await (0,o.fetchWithCsrf)("/api/outreach/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({campaignId:er,templateId:en,leadIds:[],sendNow:!0})})},ey=async()=>{let e=Object.entries(Z).filter(([e,t])=>t).map(([e])=>parseInt(e)).map(e=>X[e]).filter(Boolean),t=null;try{let e=await fetch("/api/sales/deal-stages"),s=await e.json();e.ok&&Array.isArray(s.stages)&&s.stages.length>0&&(t=s.stages[0].id)}catch{}for(let s of e){let e={title:s.company||s.fullName||"Lead Deal",description:`Imported from ${s.channel||"scraper"}: ${s.sourceUrl||""}`,deal_value:null,currency:"EUR",stage_id:t||void 0,contact_name:s.fullName||null,contact_email:s.email&&s.email.trim().length>0?s.email:null,company_name:s.company||null,source:"scraper"};await (0,o.fetchWithCsrf)("/api/sales/deals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}ee({})},ej=(0,s.useMemo)(()=>X.slice(0,200),[X]),eS=async()=>{let e=await fetch("/api/scrape/runs"),t=await e.json();e.ok&&ec(t.runs||[])};(0,s.useEffect)(()=>{eS()},[]),(0,s.useEffect)(()=>{let e=setInterval(eS,1e4);return()=>clearInterval(e)},[]);let eb=async()=>{let t="maps"===e?`Scrape Maps: ${u}`:"linkedin"===e?"Scrape LinkedIn":"validator"===e?"Validate Emails":`Scrape Messe: ${W}`,s="maps"===e?{type:"maps",params:{searchQuery:u,location:p,limit:m,withWebsiteOnly:g}}:"linkedin"===e?{type:"linkedin",params:w?{searchUrl:w,startPage:R,endPage:O}:{profileUrl:S}}:"validator"===e?{type:"validator",params:{emails:B.split(/[\n,\s]+/).map(e=>e.trim()).filter(Boolean)}}:{type:"messe",params:{provider:W,query:H}};(await (0,o.fetchWithCsrf)("/api/automation/schedules",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,type:"scrape",interval_minutes:60,cron_expr:ed||null,active:!0,metadata:s})})).ok&&await eS()};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(a.Card,{className:"p-4 space-y-3",children:(0,t.jsxs)(n.Tabs,{value:e,onValueChange:d,children:[(0,t.jsxs)(n.TabsList,{children:[(0,t.jsx)(n.TabsTrigger,{value:"maps",children:"Google Maps"}),(0,t.jsx)(n.TabsTrigger,{value:"linkedin",children:"LinkedIn"}),(0,t.jsx)(n.TabsTrigger,{value:"validator",children:"Validator"}),(0,t.jsx)(n.TabsTrigger,{value:"messe",children:"Messe"})]}),(0,t.jsxs)(n.TabsContent,{value:"maps",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2",children:[(0,t.jsx)(i.Input,{placeholder:"Suche",value:u,onChange:e=>h(e.target.value)}),(0,t.jsx)(i.Input,{placeholder:"Ort",value:p,onChange:e=>f(e.target.value)}),(0,t.jsx)(i.Input,{type:"number",placeholder:"Limit",value:m,onChange:e=>v(parseInt(e.target.value||"0"))}),(0,t.jsxs)(l.Select,{value:g?"yes":"no",onValueChange:e=>x("yes"===e),children:[(0,t.jsx)(l.SelectTrigger,{children:(0,t.jsx)(l.SelectValue,{placeholder:"Nur mit Website"})}),(0,t.jsxs)(l.SelectContent,{children:[(0,t.jsx)(l.SelectItem,{value:"no",children:"Alle"}),(0,t.jsx)(l.SelectItem,{value:"yes",children:"Nur mit Website"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mt-2",children:[(0,t.jsxs)(l.Select,{value:y?"yes":"no",onValueChange:e=>j("yes"===e),children:[(0,t.jsx)(l.SelectTrigger,{children:(0,t.jsx)(l.SelectValue,{placeholder:"Kontakte anreichern"})}),(0,t.jsxs)(l.SelectContent,{children:[(0,t.jsx)(l.SelectItem,{value:"no",children:"Nicht anreichern"}),(0,t.jsx)(l.SelectItem,{value:"yes",children:"Anreichern"})]})]}),(0,t.jsx)(r.Button,{onClick:ep,disabled:q,children:"Start"})]})]}),(0,t.jsxs)(n.TabsContent,{value:"linkedin",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[(0,t.jsxs)(l.Select,{value:T,onValueChange:N,children:[(0,t.jsx)(l.SelectTrigger,{children:(0,t.jsx)(l.SelectValue,{placeholder:"Resultat"})}),(0,t.jsxs)(l.SelectContent,{children:[(0,t.jsx)(l.SelectItem,{value:"people",children:"Personen"}),(0,t.jsx)(l.SelectItem,{value:"companies",children:"Firmen"})]})]}),(0,t.jsx)(i.Input,{placeholder:"Keywords (optional)",value:I,onChange:e=>k(e.target.value)})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 mt-2",children:[(0,t.jsx)(i.Input,{placeholder:"Search URL (optional)",value:w,onChange:e=>C(e.target.value)}),(0,t.jsx)(i.Input,{placeholder:"Profil URL (optional)",value:S,onChange:e=>b(e.target.value)}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsx)(i.Input,{type:"number",placeholder:"Startseite",value:R,onChange:e=>A(parseInt(e.target.value||"1"))}),(0,t.jsx)(i.Input,{type:"number",placeholder:"Endseite",value:O,onChange:e=>E(parseInt(e.target.value||"1"))})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 mt-2",children:[(0,t.jsx)(i.Input,{placeholder:"Ort (optional)",value:F,onChange:e=>M(e.target.value)}),(0,t.jsx)(i.Input,{placeholder:"Industrie (optional)",value:D,onChange:e=>P(e.target.value)}),(0,t.jsx)(i.Input,{placeholder:"Firma (optional)",value:U,onChange:e=>_(e.target.value)})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 mt-2",children:[(0,t.jsx)(i.Input,{placeholder:"Titel (optional)",value:$,onChange:e=>L(e.target.value)}),(0,t.jsxs)(l.Select,{value:K,onValueChange:z,children:[(0,t.jsx)(l.SelectTrigger,{children:(0,t.jsx)(l.SelectValue,{placeholder:"Firmengröße (optional)"})}),(0,t.jsxs)(l.SelectContent,{children:[(0,t.jsx)(l.SelectItem,{value:"any",children:"Beliebig"}),(0,t.jsx)(l.SelectItem,{value:"1-10",children:"1-10"}),(0,t.jsx)(l.SelectItem,{value:"11-50",children:"11-50"}),(0,t.jsx)(l.SelectItem,{value:"51-200",children:"51-200"}),(0,t.jsx)(l.SelectItem,{value:"201-500",children:"201-500"}),(0,t.jsx)(l.SelectItem,{value:"501-1000",children:"501-1000"}),(0,t.jsx)(l.SelectItem,{value:"1001-5000",children:"1001-5000"}),(0,t.jsx)(l.SelectItem,{value:"5001-10000",children:"5001-10000"}),(0,t.jsx)(l.SelectItem,{value:"10001+",children:"10001+"})]})]})]}),(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)(r.Button,{onClick:ef,disabled:q,children:"Start"}),(0,t.jsx)(r.Button,{className:"ml-2",variant:"outline",onClick:()=>{let e=w;e||(e=("companies"===T?"https://www.linkedin.com/search/results/companies/?keywords=":"https://www.linkedin.com/search/results/people/?keywords=")+encodeURIComponent([I,U,D,F,$,K&&`employees ${K}`].filter(Boolean).join(" "))),e&&window.open(e,"_blank")},children:"LinkedIn öffnen"})]})]}),(0,t.jsx)(n.TabsContent,{value:"validator",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[(0,t.jsx)(i.Input,{placeholder:"Emails, getrennt durch Komma",value:B,onChange:e=>V(e.target.value)}),(0,t.jsx)(r.Button,{onClick:em,disabled:q,children:"Start"})]})}),(0,t.jsx)(n.TabsContent,{value:"messe",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2",children:[(0,t.jsxs)(l.Select,{value:W,onValueChange:G,children:[(0,t.jsx)(l.SelectTrigger,{children:(0,t.jsx)(l.SelectValue,{placeholder:"Quelle"})}),(0,t.jsxs)(l.SelectContent,{children:[(0,t.jsx)(l.SelectItem,{value:"messe-berlin",children:"Messe Berlin"}),(0,t.jsx)(l.SelectItem,{value:"messe-muenchen",children:"Messe München"}),(0,t.jsx)(l.SelectItem,{value:"koeln",children:"Koelnmesse"}),(0,t.jsx)(l.SelectItem,{value:"afag",children:"AFAG"})]})]}),(0,t.jsx)(i.Input,{placeholder:"Parameter",value:H,onChange:e=>J(e.target.value)}),(0,t.jsx)(r.Button,{onClick:ev,disabled:q,children:"Start"})]})})]})}),(0,t.jsxs)(a.Card,{className:"p-4 space-y-3",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[(0,t.jsx)(i.Input,{placeholder:"Cron (optional)",value:ed,onChange:e=>eu(e.target.value)}),(0,t.jsx)(r.Button,{onClick:eb,children:"Schedule"}),(0,t.jsx)(r.Button,{variant:"outline",onClick:eS,children:"Refresh Runs"})]}),(0,t.jsx)("div",{className:"overflow-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-left",children:"Run"}),(0,t.jsx)("th",{className:"text-left",children:"Type"}),(0,t.jsx)("th",{className:"text-left",children:"Status"}),(0,t.jsx)("th",{className:"text-left",children:"Results"}),(0,t.jsx)("th",{className:"text-left",children:"Error"}),(0,t.jsx)("th",{className:"text-left",children:"Aktion"})]})}),(0,t.jsx)("tbody",{children:(eo||[]).map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"truncate max-w-[200px]",children:e.id}),(0,t.jsx)("td",{children:e.type}),(0,t.jsx)("td",{children:e.status}),(0,t.jsx)("td",{children:e.result_count}),(0,t.jsx)("td",{className:"truncate max-w-[240px]",children:e.error_message||""}),(0,t.jsx)("td",{children:(0,t.jsx)(r.Button,{size:"sm",variant:"outline",onClick:async()=>{let t=await fetch(`/api/scrape?runId=${e.id}`),s=await t.json();"succeeded"===s.status&&Y(s.results||[])},children:"Ergebnisse laden"})})]},e.id))})]})})]}),(0,t.jsxs)(a.Card,{className:"p-4 space-y-3",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2",children:[(0,t.jsx)(i.Input,{placeholder:"Leadliste Name",value:es,onChange:e=>ea(e.target.value)}),(0,t.jsx)(r.Button,{onClick:eg,disabled:q||0===X.length,children:"In Liste speichern"}),(0,t.jsx)(i.Input,{placeholder:"Kampagnen ID",value:er,onChange:e=>ei(e.target.value)}),(0,t.jsx)(i.Input,{placeholder:"Template ID",value:en,onChange:e=>el(e.target.value)})]}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsx)(r.Button,{variant:"outline",onClick:ex,disabled:q||0===X.length,children:"Outreach senden"})})]}),(0,t.jsxs)(a.Card,{className:"p-4",children:[(0,t.jsx)("div",{className:"overflow-auto hidden md:block",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-left",children:"Name"}),(0,t.jsx)("th",{className:"text-left",children:"Firma"}),(0,t.jsx)("th",{className:"text-left",children:"Email"}),(0,t.jsx)("th",{className:"text-left",children:"Kanal"}),(0,t.jsx)("th",{className:"text-left",children:"Quelle"})]})}),(0,t.jsx)("tbody",{children:ej.map((e,s)=>(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{children:[(0,t.jsx)("input",{type:"checkbox",checked:!!Z[s],onChange:()=>et(s)})," ",e.fullName||""]}),(0,t.jsx)("td",{children:e.company||""}),(0,t.jsx)("td",{children:e.email||""}),(0,t.jsx)("td",{children:e.channel||""}),(0,t.jsx)("td",{className:"truncate max-w-[240px]",children:e.sourceUrl||""})]},s))})]})}),(0,t.jsx)("div",{className:"md:hidden space-y-2",children:ej.map((e,s)=>(0,t.jsxs)("div",{className:"rounded-lg border p-3 flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-sm",children:e.fullName||""}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:e.company||""}),(0,t.jsx)("div",{className:"text-xs break-all",children:e.email||""}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:e.channel||""}),(0,t.jsx)("div",{className:"text-xs truncate max-w-[240px]",children:e.sourceUrl||""})]}),(0,t.jsx)("input",{type:"checkbox",checked:!!Z[s],onChange:()=>et(s)})]},s))}),(0,t.jsx)("div",{className:"mt-3 flex gap-2",children:(0,t.jsx)(r.Button,{variant:"outline",onClick:ey,disabled:0===Object.values(Z).filter(Boolean).length,children:"Deals anlegen"})})]})]})}e.s(["default",()=>d])}]);