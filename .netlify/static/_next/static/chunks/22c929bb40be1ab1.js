(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,952835,e=>{"use strict";var a=e.i(843476),l=e.i(271645),t=e.i(970065),s=e.i(167881),r=e.i(23750),n=e.i(994179),i=e.i(62870),c=e.i(947627),d=e.i(625959),o=e.i(630374),h=e.i(10708),m=e.i(184762),u=e.i(471435),x=e.i(555436),j=e.i(440160),g=e.i(569074),p=e.i(263488),f=e.i(475254);let v=(0,f.default)("mail-check",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"12jkf8"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]]),y=(0,f.default)("mail-x",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h9",key:"1j9vog"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m17 17 4 4",key:"1b3523"}],["path",{d:"m21 17-4 4",key:"uinynz"}]]);var b=e.i(688511),C=e.i(727612),S=e.i(107233),N=e.i(16715),w=e.i(761911),I=e.i(25652);let k=(0,f.default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),T=(0,f.default)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]),L=(0,f.default)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),F=(0,f.default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);var E=e.i(870273),D=e.i(846696),B=e.i(287336),M=e.i(431343),_=e.i(531278),A=e.i(87446);function U({onImported:e}){let[t,i]=(0,l.useState)(!1),[c,m]=(0,l.useState)(""),[u,x]=(0,l.useState)(""),[j,p]=(0,l.useState)(100),[f,v]=(0,l.useState)(""),[y,b]=(0,l.useState)(!1),[C,S]=(0,l.useState)(!1),[N,w]=(0,l.useState)(!0),[I,T]=(0,l.useState)(!1),[L,F]=(0,l.useState)(0),[E,U]=(0,l.useState)(null),[O,z]=(0,l.useState)("idle"),[R,$]=(0,l.useState)([]),[V,H]=(0,l.useState)([]),[P,W]=(0,l.useState)(!1),[K,J]=(0,l.useState)(!1),[G,Z]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=null;return K&&E&&(e=setInterval(async()=>{try{let e=await fetch(`/api/scrape?runId=${E}&enrichContacts=${C?"true":"false"}`),a=await e.json();z("succeeded"===a.status?"succeeded":"failed"===a.status?"failed":"running"),Array.isArray(a.results)&&$(a.results),("succeeded"===a.status||"failed"===a.status)&&J(!1)}catch(e){J(!1),D.toast.error("Fehler beim Statusabruf des Scrapers")}},3e3)),()=>{e&&clearInterval(e)}},[K,E]),(0,l.useEffect)(()=>{"succeeded"===O&&N&&R.length>0&&!G&&(D.toast.info("Import wird automatisch gestartet …"),X())},[O,N,R]),(0,l.useEffect)(()=>{(async()=>{if(I&&"succeeded"===O&&0!==R.length)try{let e=await fetch("/api/leads?limit=5000&page=1");if(!e.ok)return;let a=await e.json(),l=Array.isArray(a?.leads)?a.leads:[],t=e=>{let a=(e||"").trim();if(!a)return"";try{let e=new URL(a.startsWith("http")?a:`https://${a}`);return(e.hostname+e.pathname).replace(/\/+$/,"").toLowerCase()}catch{return a.replace(/\/+$/,"").toLowerCase()}},s=new Set;for(let e of l){let a=t(e?.website_url||e?.source_url);a&&s.add(a)}let r=R.map(e=>{let a=t(e.websiteUrl||e.sourceUrl);return!!a&&s.has(a)});H(r),W(!0)}catch(e){H([]),W(!1)}})()},[I,O,R]);let q=async()=>{if(!c||!u)return void D.toast.error("Bitte Suchbegriff und Ort angeben");try{z("running");let e=await (0,A.fetchWithCsrf)("/api/scrape",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"maps",params:{searchQuery:c,limit:j,location:u,withWebsiteOnly:y,maxLeads:L,contactsEnrichment:C}})});if(!e.ok){let a=null;try{a=await e.json()}catch{}if(z("failed"),a?.error){let e="number"==typeof a?.apifyStatus?` (Upstream ${a.apifyStatus})`:"",l=a?.apifyMessage?` – ${String(a.apifyMessage).slice(0,160)}`:"";D.toast.error(`Scrape fehlgeschlagen: ${a.error}${e}${l}`)}else D.toast.error("Scrape konnte nicht gestartet werden");return}let a=await e.json();U(a.runId),J(!0),D.toast.success("Scrape gestartet – Ergebnisse werden geladen")}catch(e){z("failed"),D.toast.error("Scrape konnte nicht gestartet werden")}},X=async()=>{if(0===R.length)return void D.toast.error("Keine Ergebnisse zum Importieren");try{Z(!0);let a=(I&&P&&V.length===R.length?R.filter((e,a)=>!V[a]):R).map(e=>({full_name:e.fullName||"",job_title:e.jobTitle||"",company:e.company||"",email:e.email||Array.isArray(e.contactEmails)&&e.contactEmails[0]||"",region:e.country||e.region||"",channel:"maps",source_url:e.sourceUrl||"",phone:e.phone||"",website_url:e.websiteUrl||"",address:e.address||"",city:e.city||"",country:e.country||"",postal_code:e.postalCode||"",lat:"number"==typeof e.lat?e.lat:void 0,lng:"number"==typeof e.lng?e.lng:void 0,rating_avg:"number"==typeof e.ratingAvg?e.ratingAvg:void 0,rating_count:"number"==typeof e.ratingCount?e.ratingCount:void 0,categories:Array.isArray(e.categories)?e.categories:void 0})),l=await (0,A.fetchWithCsrf)("/api/leads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leads:a,listName:f||void 0})});if(!l.ok){let e=null;try{e=await l.json()}catch{}let a=l.status,t=e?.error?String(e.error):"Import fehlgeschlagen";401===a&&(t="Nicht angemeldet. Bitte zuerst einloggen."),503===a&&/Supabase/i.test(String(t))&&(t="Supabase nicht konfiguriert. Prüfe ENV: NEXT_PUBLIC_SUPABASE_URL und SUPABASE_SERVICE_ROLE_KEY."),D.toast.error(`${t} (Status ${a})`);return}let t=await l.json(),s=t.imported??t.leads?.length??a.length,r=R.length,n=I?V.filter(Boolean).length:Math.max(0,r-s);D.toast.success(`Importiert: ${s}, \xfcbersprungen: ${n}`),i(!1),U(null),$([]),H([]),W(!1),z("idle"),e&&e(s)}catch(e){D.toast.error("Import fehlgeschlagen")}finally{Z(!1)}};return(0,a.jsxs)(o.Dialog,{open:t,onOpenChange:i,children:[(0,a.jsx)(o.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(s.Button,{variant:"default",size:"sm",children:[(0,a.jsx)(k,{className:"h-4 w-4 mr-2"}),"Leads von Google Maps scrapen"]})}),(0,a.jsxs)(o.DialogContent,{children:[(0,a.jsxs)(o.DialogHeader,{children:[(0,a.jsx)(o.DialogTitle,{children:"Google Maps Scraper"}),(0,a.jsx)(o.DialogDescription,{children:"Suche nach relevanten Unternehmen und importiere die Ergebnisse direkt in deine Leads."})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{children:"Suchbegriff"}),(0,a.jsx)(r.Input,{value:c,onChange:e=>m(e.target.value),placeholder:"z.B. Spedition, Logistik"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{children:"Ort"}),(0,a.jsx)(r.Input,{value:u,onChange:e=>x(e.target.value),placeholder:"z.B. München, Deutschland"})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,a.jsx)(d.Checkbox,{id:"onlyNew",checked:I,onCheckedChange:e=>T(!!e)}),(0,a.jsxs)("div",{className:"grid gap-1.5 leading-none",children:[(0,a.jsx)(h.Label,{htmlFor:"onlyNew",children:"Nur neue Leads importieren"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Kennzeichnet vorhandene Einträge und importiert nur neue."})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{children:"Liste erstellen (optional)"}),(0,a.jsx)(r.Input,{value:f,onChange:e=>v(e.target.value),placeholder:"z.B. Heizungsbauer München Okt 2025"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{children:"Anzahl Orte"}),(0,a.jsx)(r.Input,{type:"number",min:1,max:1e3,value:j,onChange:e=>p(parseInt(e.target.value||"100"))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Checkbox,{checked:y,onCheckedChange:e=>b(!!e),id:"withWebsiteOnly"}),(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(h.Label,{htmlFor:"withWebsiteOnly",children:"Nur Orte mit Website"}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Optimiert Kosten und benötigt für Leads-Enrichment"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Checkbox,{checked:C,onCheckedChange:e=>S(!!e),id:"enableContacts"}),(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(h.Label,{htmlFor:"enableContacts",children:"Kontakte anreichern (E-Mail, Socials)"}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Zusatzkosten je Ergebnis; zieht E-Mail/Telefon/Socials von der Website"})]})]}),(0,a.jsxs)("div",{className:"col-span-2 grid grid-cols-2 gap-4 items-end",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{children:"Leads pro Ort (Business Leads)"}),(0,a.jsx)(r.Input,{type:"number",min:0,max:50,value:L,onChange:e=>F(parseInt(e.target.value||"0")),placeholder:"z.B. 3"})]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Preis je erfolgreich gefundenem Lead ab $0.005. Hohe Werte erhöhen Kosten linear."})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,a.jsx)(d.Checkbox,{id:"onlyNew",checked:I,onCheckedChange:e=>T(!!e)}),(0,a.jsxs)("div",{className:"grid gap-1.5 leading-none",children:[(0,a.jsx)(h.Label,{htmlFor:"onlyNew",children:"Nur neue Leads importieren"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Kennzeichnet vorhandene Einträge und importiert nur neue."})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(s.Button,{onClick:q,disabled:"running"===O,children:["running"===O?(0,a.jsx)(_.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}):(0,a.jsx)(M.Play,{className:"h-4 w-4 mr-2"}),"running"===O?"Scraper läuft...":"Scrape starten"]}),"succeeded"===O&&(0,a.jsxs)(s.Button,{variant:"secondary",onClick:X,disabled:G,children:[(0,a.jsx)(g.Upload,{className:"h-4 w-4 mr-2"}),G?"Importiere…":"Ergebnisse importieren"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Status"}),(0,a.jsxs)("div",{className:"text-sm",children:["idle"===O&&"Bereit","running"===O&&"Läuft...","succeeded"===O&&`Fertig – ${R.length} Ergebnisse`,"failed"===O&&"Fehlgeschlagen"]}),(0,a.jsx)(B.Progress,{value:"running"===O?50:100*("succeeded"===O)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,a.jsx)(d.Checkbox,{id:"autoImport",checked:N,onCheckedChange:e=>w(!!e)}),(0,a.jsxs)("div",{className:"grid gap-1.5 leading-none",children:[(0,a.jsx)(h.Label,{htmlFor:"autoImport",children:"Automatisch importieren"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Import startet automatisch nach erfolgreichem Scrape."})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,a.jsx)(d.Checkbox,{id:"onlyNew",checked:I,onCheckedChange:e=>T(!!e)}),(0,a.jsxs)("div",{className:"grid gap-1.5 leading-none",children:[(0,a.jsx)(h.Label,{htmlFor:"onlyNew",children:"Nur neue Leads importieren"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Kennzeichnet vorhandene Einträge und importiert nur neue."})]})]})]}),"succeeded"===O&&R.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Vorschau (Top-Ergebnisse)"}),(0,a.jsxs)("div",{className:"rounded border",children:[(0,a.jsxs)("div",{className:"grid grid-cols-9 gap-2 p-2 text-xs font-medium bg-muted",children:[(0,a.jsx)("div",{children:"Firma"}),(0,a.jsx)("div",{children:"Website"}),(0,a.jsx)("div",{children:"Telefon"}),(0,a.jsx)("div",{children:"Ort"}),(0,a.jsx)("div",{children:"Bewertung"}),(0,a.jsx)("div",{children:"Reviews"}),(0,a.jsx)("div",{children:"Emails"}),(0,a.jsx)("div",{children:"Socials"}),(0,a.jsx)("div",{children:"Leads"})]}),(0,a.jsx)("div",{className:"max-h-64 overflow-auto",children:R.slice(0,25).map((e,l)=>{let t;return(0,a.jsxs)("div",{className:"grid grid-cols-9 gap-2 p-2 border-t text-xs",children:[(0,a.jsxs)("div",{className:"truncate",title:e.company,children:[e.company||"-",I&&P&&V[l]?(0,a.jsx)(n.Badge,{variant:"outline",className:"ml-2",children:"Schon vorhanden"}):null]}),(0,a.jsx)("div",{className:"truncate",title:e.websiteUrl||e.sourceUrl,children:e.websiteUrl||e.sourceUrl||"-"}),(0,a.jsx)("div",{className:"truncate",title:e.phone,children:e.phone||"-"}),(0,a.jsx)("div",{className:"truncate",title:`${e.city||""} ${e.country||""}`.trim(),children:e.city||e.country?`${e.city||""}${e.city&&e.country?", ":""}${e.country||""}`:"-"}),(0,a.jsx)("div",{children:"number"==typeof e.ratingAvg?e.ratingAvg.toFixed(1):"-"}),(0,a.jsx)("div",{children:"number"==typeof e.ratingCount?e.ratingCount:"-"}),(0,a.jsx)("div",{className:"truncate",title:(e.contactEmails||[]).join(", "),children:Array.isArray(e.contactEmails)&&e.contactEmails.length>0?e.contactEmails.slice(0,2).join(", "):"-"}),(0,a.jsx)("div",{className:"truncate",title:(e.socialProfiles?Object.values(e.socialProfiles).flat():[]).join(", "),children:(t=e.socialProfiles?Object.values(e.socialProfiles).flat():[]).length>0?t.slice(0,2).join(", "):"-"}),(0,a.jsx)("div",{children:"number"==typeof e.leadsCount?e.leadsCount:Array.isArray(e.leads)?e.leads.length:"-"})]},l)})})]})]})]})]})]})}var O=e.i(653145),z=e.i(994814),R=e.i(362201),$=e.i(874946);let V=R.object({full_name:R.string().min(2,{message:"Name must be at least 2 characters."}),email:R.string().email({message:"Please enter a valid email address."}),job_title:R.string().optional(),company:R.string().min(1,{message:"Company name is required."}),region:R.string().min(1,{message:"Please select a region."}),channel:R.string().min(1,{message:"Please select a channel."})});function H({open:e,onOpenChange:t}){let[n,c]=(0,l.useState)(!1),d=(0,O.useForm)({resolver:(0,z.zodResolver)(V),defaultValues:{full_name:"",email:"",job_title:"",company:"",region:"",channel:"manual"}});async function h(e){c(!0);try{let a={leads:[{full_name:e.full_name,email:e.email,job_title:e.job_title,company:e.company,region:e.region,channel:e.channel}]},l=await (0,A.fetchWithCsrf)("/api/leads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e?.error||"Failed to create lead")}D.toast.success("Lead created successfully!",{description:`${e.full_name} has been added to your database.`}),d.reset(),t(!1)}catch(e){D.toast.error(e?.message||"Failed to create lead")}finally{c(!1)}}return(0,a.jsx)(o.Dialog,{open:e,onOpenChange:t,children:(0,a.jsxs)(o.DialogContent,{className:"sm:max-w-[525px]",children:[(0,a.jsxs)(o.DialogHeader,{children:[(0,a.jsx)(o.DialogTitle,{children:"Create New Lead"}),(0,a.jsx)(o.DialogDescription,{children:"Add a new lead to your database. All fields marked with * are required."})]}),(0,a.jsx)($.Form,{...d,children:(0,a.jsxs)("form",{onSubmit:d.handleSubmit(h),className:"space-y-4",children:[(0,a.jsx)($.FormField,{control:d.control,name:"full_name",render:({field:e})=>(0,a.jsxs)($.FormItem,{children:[(0,a.jsx)($.FormLabel,{children:"Full Name *"}),(0,a.jsx)($.FormControl,{children:(0,a.jsx)(r.Input,{placeholder:"John Smith",...e})}),(0,a.jsx)($.FormMessage,{})]})}),(0,a.jsx)($.FormField,{control:d.control,name:"email",render:({field:e})=>(0,a.jsxs)($.FormItem,{children:[(0,a.jsx)($.FormLabel,{children:"Email *"}),(0,a.jsx)($.FormControl,{children:(0,a.jsx)(r.Input,{placeholder:"john.smith@company.com",type:"email",...e})}),(0,a.jsx)($.FormMessage,{})]})}),(0,a.jsx)($.FormField,{control:d.control,name:"job_title",render:({field:e})=>(0,a.jsxs)($.FormItem,{children:[(0,a.jsx)($.FormLabel,{children:"Job Title"}),(0,a.jsx)($.FormControl,{children:(0,a.jsx)(r.Input,{placeholder:"Supply Chain Director",...e})}),(0,a.jsx)($.FormDescription,{children:"Optional - helps with lead scoring"}),(0,a.jsx)($.FormMessage,{})]})}),(0,a.jsx)($.FormField,{control:d.control,name:"company",render:({field:e})=>(0,a.jsxs)($.FormItem,{children:[(0,a.jsx)($.FormLabel,{children:"Company *"}),(0,a.jsx)($.FormControl,{children:(0,a.jsx)(r.Input,{placeholder:"Acme Corporation",...e})}),(0,a.jsx)($.FormMessage,{})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)($.FormField,{control:d.control,name:"region",render:({field:e})=>(0,a.jsxs)($.FormItem,{children:[(0,a.jsx)($.FormLabel,{children:"Region *"}),(0,a.jsxs)(i.Select,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,a.jsx)($.FormControl,{children:(0,a.jsx)(i.SelectTrigger,{children:(0,a.jsx)(i.SelectValue,{placeholder:"Select region"})})}),(0,a.jsxs)(i.SelectContent,{children:[(0,a.jsx)(i.SelectItem,{value:"usa",children:"USA"}),(0,a.jsx)(i.SelectItem,{value:"germany",children:"Germany"}),(0,a.jsx)(i.SelectItem,{value:"nigeria",children:"Nigeria"}),(0,a.jsx)(i.SelectItem,{value:"uk",children:"UK"}),(0,a.jsx)(i.SelectItem,{value:"france",children:"France"}),(0,a.jsx)(i.SelectItem,{value:"other",children:"Other"})]})]}),(0,a.jsx)($.FormMessage,{})]})}),(0,a.jsx)($.FormField,{control:d.control,name:"channel",render:({field:e})=>(0,a.jsxs)($.FormItem,{children:[(0,a.jsx)($.FormLabel,{children:"Channel *"}),(0,a.jsxs)(i.Select,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,a.jsx)($.FormControl,{children:(0,a.jsx)(i.SelectTrigger,{children:(0,a.jsx)(i.SelectValue,{placeholder:"Select channel"})})}),(0,a.jsxs)(i.SelectContent,{children:[(0,a.jsx)(i.SelectItem,{value:"manual",children:"Manual Entry"}),(0,a.jsx)(i.SelectItem,{value:"linkedin",children:"LinkedIn"}),(0,a.jsx)(i.SelectItem,{value:"maps",children:"Google Maps"}),(0,a.jsx)(i.SelectItem,{value:"referral",children:"Referral"}),(0,a.jsx)(i.SelectItem,{value:"import",children:"Import"})]})]}),(0,a.jsx)($.FormMessage,{})]})})]}),(0,a.jsxs)(o.DialogFooter,{children:[(0,a.jsx)(s.Button,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:n,children:"Cancel"}),(0,a.jsxs)(s.Button,{type:"submit",disabled:n,children:[n&&(0,a.jsx)(_.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),n?"Creating...":"Create Lead"]})]})]})})]})})}function P({className:e}){let[f,B]=(0,l.useState)([]),[M,_]=(0,l.useState)(!0),[O,z]=(0,l.useState)([]),[R,$]=(0,l.useState)(""),[V,P]=(0,l.useState)([]),[Z,q]=(0,l.useState)(""),[X,Y]=(0,l.useState)({region:"",status:"",scoreMin:"",scoreMax:"",outreachReady:""}),[Q,ee]=(0,l.useState)({page:1,limit:50,total:0,pages:0}),[ea,el]=(0,l.useState)(null),[et,es]=(0,l.useState)(!1),[er,en]=(0,l.useState)(""),[ei,ec]=(0,l.useState)(!1),[ed,eo]=(0,l.useState)([]),[eh,em]=(0,l.useState)([]),[eu,ex]=(0,l.useState)({});(0,l.useEffect)(()=>{ej()},[]),(0,l.useEffect)(()=>{eg()},[R,X,Q.page,Z]);let ej=async()=>{try{let e=await fetch("/api/lead-lists");if(e.ok){let a=await e.json();P(a.lists||[])}}catch(e){console.error("Failed to fetch lead lists:",e)}},eg=async()=>{try{_(!0);let e=new URLSearchParams({page:Q.page.toString(),limit:Q.limit.toString(),...Object.fromEntries(Object.entries(X).filter(([e,a])=>""!==a)),...R&&{search:R}});Z&&e.set("listId",Z);let a=await fetch(`/api/leads?${e}`);if(!a.ok)throw Error("Failed to fetch leads");let l=await a.json();B(l.leads),ee(l.pagination)}catch(e){D.toast.error("Failed to load leads"),console.error("Fetch leads error:",e)}finally{_(!1)}},ep=async e=>{try{if(!(await (0,A.fetchWithCsrf)(`/api/leads/${e}`,{method:"DELETE"})).ok)throw Error("Failed to delete lead");B(a=>a.filter(a=>a.id!==e)),z(a=>a.filter(a=>a!==e)),D.toast.success("Lead deleted successfully")}catch(e){D.toast.error("Failed to delete lead"),console.error("Delete lead error:",e)}},ef=async(e,a)=>{try{let l=await (0,A.fetchWithCsrf)(`/api/leads/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!l.ok)throw Error("Failed to update lead");let{lead:t}=await l.json();B(a=>a.map(a=>a.id===e?t:a)),el(null),D.toast.success("Lead updated successfully")}catch(e){D.toast.error("Failed to update lead"),console.error("Update lead error:",e)}},ev=async()=>{try{let e=[];e=ed.length>0&&eh.length>0&&Object.keys(eu).length>0?eh.map(e=>{let a={};return ed.forEach((l,t)=>{let s=eu[l];s&&(a[s]=(e[t]||"").trim())}),a}).filter(e=>e.full_name||e.fullName):er.trim().split("\n").filter(e=>e.trim()).map(e=>{let[a,l,t,s]=e.split(",").map(e=>e.trim());return{fullName:a,email:l,company:t,jobTitle:s}}).filter(e=>e.fullName);let a=await (0,A.fetchWithCsrf)("/api/leads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leads:e})});if(!a.ok)throw Error("Failed to import leads");let{leads:l}=await a.json();B(e=>[...l,...e]),es(!1),en(""),eo([]),em([]),ex({}),D.toast.success(`Imported ${l.length} leads`)}catch(e){D.toast.error("Failed to import leads"),console.error("Import leads error:",e)}},ey={total:f.length,outreachReady:f.filter(e=>e.is_outreach_ready).length,validEmails:f.filter(e=>"valid"===e.email_status).length,avgScore:f.length>0?Math.round(f.reduce((e,a)=>e+a.score,0)/f.length):0};return(0,a.jsxs)("div",{className:e,children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-4 mb-6",children:[(0,a.jsxs)(t.Card,{children:[(0,a.jsxs)(t.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(t.CardTitle,{className:"text-sm font-medium",children:"Total Leads"}),(0,a.jsx)(w.Users,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(t.CardContent,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:ey.total})})]}),(0,a.jsxs)(t.Card,{children:[(0,a.jsxs)(t.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(t.CardTitle,{className:"text-sm font-medium",children:"Outreach Ready"}),(0,a.jsx)(p.Mail,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(t.CardContent,{children:(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:ey.outreachReady})})]}),(0,a.jsxs)(t.Card,{children:[(0,a.jsxs)(t.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(t.CardTitle,{className:"text-sm font-medium",children:"Valid Emails"}),(0,a.jsx)(v,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(t.CardContent,{children:(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:ey.validEmails})})]}),(0,a.jsxs)(t.Card,{children:[(0,a.jsxs)(t.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(t.CardTitle,{className:"text-sm font-medium",children:"Avg Score"}),(0,a.jsx)(I.TrendingUp,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(t.CardContent,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:ey.avgScore})})]})]}),(0,a.jsxs)(t.Card,{className:"mb-6",children:[(0,a.jsx)(t.CardHeader,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(t.CardTitle,{children:"Leads Management"}),(0,a.jsx)(t.CardDescription,{children:"Manage and analyze your lead database"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(o.Dialog,{children:[(0,a.jsx)(o.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(s.Button,{variant:"outline",children:[(0,a.jsx)(g.Upload,{className:"h-4 w-4 mr-2"}),"Import AFAG Exhibitors"]})}),(0,a.jsxs)(o.DialogContent,{children:[(0,a.jsxs)(o.DialogHeader,{children:[(0,a.jsx)(o.DialogTitle,{children:"Import AFAG/Messe Frankfurt Exhibitors"}),(0,a.jsx)(o.DialogDescription,{children:"Gib die Ausstellerlisten-URL ein (z. B. eine Messe Frankfurt Exhibitor Directory Seite)."})]}),(0,a.jsx)(W,{onImported:()=>eg()})]})]}),(0,a.jsxs)(o.Dialog,{children:[(0,a.jsx)(o.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(s.Button,{variant:"outline",children:[(0,a.jsx)(g.Upload,{className:"h-4 w-4 mr-2"}),"Import Koelnmesse Exhibitors"]})}),(0,a.jsxs)(o.DialogContent,{children:[(0,a.jsxs)(o.DialogHeader,{children:[(0,a.jsx)(o.DialogTitle,{children:"Import Koelnmesse Aussteller"}),(0,a.jsx)(o.DialogDescription,{children:"Liste-URL einer Koelnmesse-Veranstaltung angeben (Exhibitor Directory)."})]}),(0,a.jsx)(K,{onImported:()=>eg()})]})]}),(0,a.jsxs)(o.Dialog,{children:[(0,a.jsx)(o.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(s.Button,{variant:"outline",children:[(0,a.jsx)(g.Upload,{className:"h-4 w-4 mr-2"}),"Import Messe München Exhibitors"]})}),(0,a.jsxs)(o.DialogContent,{children:[(0,a.jsxs)(o.DialogHeader,{children:[(0,a.jsx)(o.DialogTitle,{children:"Import Messe München Aussteller"}),(0,a.jsx)(o.DialogDescription,{children:"Liste-URL einer Messe München Veranstaltung angeben (Exhibitordetails)."})]}),(0,a.jsx)(J,{onImported:()=>eg()})]})]}),(0,a.jsxs)(o.Dialog,{children:[(0,a.jsx)(o.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(s.Button,{variant:"outline",children:[(0,a.jsx)(g.Upload,{className:"h-4 w-4 mr-2"}),"Import Messe Berlin Exhibitors"]})}),(0,a.jsxs)(o.DialogContent,{children:[(0,a.jsxs)(o.DialogHeader,{children:[(0,a.jsx)(o.DialogTitle,{children:"Import Messe Berlin Aussteller"}),(0,a.jsx)(o.DialogDescription,{children:"Liste-URL einer Messe Berlin Veranstaltung angeben (z. B. mit /showfloor/organizations)."})]}),(0,a.jsx)(G,{onImported:()=>eg()})]})]}),(0,a.jsx)(U,{onImported:()=>eg()}),(0,a.jsxs)(o.Dialog,{open:et,onOpenChange:es,children:[(0,a.jsx)(o.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(s.Button,{variant:"outline",children:[(0,a.jsx)(g.Upload,{className:"h-4 w-4 mr-2"}),"Import"]})}),(0,a.jsxs)(o.DialogContent,{children:[(0,a.jsxs)(o.DialogHeader,{children:[(0,a.jsx)(o.DialogTitle,{children:"Import Leads"}),(0,a.jsx)(o.DialogDescription,{children:"Paste CSV data und optional Spalten zuordnen"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(m.Textarea,{placeholder:"full_name,email,company,job_title\\nJohn Doe,john@example.com,Acme Corp,CEO\\nJane Smith,jane@example.com,Tech Inc,CTO",value:er,onChange:e=>en(e.target.value),rows:6}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(s.Button,{variant:"secondary",onClick:()=>{let{headers:e,rows:a}=(e=>{let a=[],l="",t=!1;for(let s=0;s<e.length;s++){let r=e[s];'"'===r?t&&'"'===e[s+1]?(l+='"',s++):t=!t:"\n"!==r||t?l+=r:(a.push(l),l="")}l.trim().length>0&&a.push(l);let s=a.map(e=>{let a=[],l="",t=!1;for(let s=0;s<e.length;s++){let r=e[s];'"'===r?t&&'"'===e[s+1]?(l+='"',s++):t=!t:","!==r||t?l+=r:(a.push(l),l="")}return a.push(l),a});return{headers:s.length>0?s[0].map(e=>e.trim()):[],rows:s.slice(1)}})(er);eo(e),em(a);let l={};e.forEach(e=>{let a=e.trim().toLowerCase();a.includes("name")?l[e]="full_name":a.includes("email")?l[e]="email":a.includes("company")?l[e]="company":a.includes("title")||a.includes("role")?l[e]="job_title":a.includes("region")||a.includes("country")?l[e]="region":a.includes("channel")?l[e]="channel":a.includes("website")?l[e]="website_url":a.includes("phone")&&(l[e]="phone")}),ex(l)},children:"Erkenne Spalten"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:ed.length>0?`${ed.length} Spalten erkannt`:""})]}),ed.length>0&&(0,a.jsxs)("div",{className:"space-y-3",children:[ed.map(e=>(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 items-center",children:[(0,a.jsx)(h.Label,{children:e}),(0,a.jsxs)(i.Select,{value:eu[e]||"",onValueChange:a=>ex(l=>({...l,[e]:a})),children:[(0,a.jsx)(i.SelectTrigger,{children:(0,a.jsx)(i.SelectValue,{placeholder:"Zuordnung"})}),(0,a.jsxs)(i.SelectContent,{children:[(0,a.jsx)(i.SelectItem,{value:"",children:"Ignorieren"}),(0,a.jsx)(i.SelectItem,{value:"full_name",children:"Full Name"}),(0,a.jsx)(i.SelectItem,{value:"email",children:"Email"}),(0,a.jsx)(i.SelectItem,{value:"company",children:"Company"}),(0,a.jsx)(i.SelectItem,{value:"job_title",children:"Job Title"}),(0,a.jsx)(i.SelectItem,{value:"region",children:"Region"}),(0,a.jsx)(i.SelectItem,{value:"channel",children:"Channel"}),(0,a.jsx)(i.SelectItem,{value:"website_url",children:"Website"}),(0,a.jsx)(i.SelectItem,{value:"phone",children:"Phone"})]})]})]},e)),eh.length>0&&(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:`Vorschau: ${Math.min(eh.length,3)} Zeilen angezeigt`})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(s.Button,{variant:"outline",onClick:()=>es(!1),children:"Cancel"}),(0,a.jsx)(s.Button,{onClick:ev,children:"Import Leads"})]})]})]})]}),(0,a.jsxs)(o.Dialog,{open:ei,onOpenChange:ec,children:[(0,a.jsx)(o.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(s.Button,{children:[(0,a.jsx)(S.Plus,{className:"h-4 w-4 mr-2"}),"Add Lead"]})}),(0,a.jsx)(H,{open:ei,onOpenChange:ec})]}),(0,a.jsxs)(s.Button,{variant:"outline",children:[(0,a.jsx)(j.Download,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,a.jsxs)(s.Button,{onClick:eg,disabled:M,children:[(0,a.jsx)(N.RefreshCw,{className:`h-4 w-4 mr-2 ${M?"animate-spin":""}`}),"Refresh"]})]})]})}),(0,a.jsx)(t.CardContent,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(x.Search,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(r.Input,{placeholder:"Search leads...",value:R,onChange:e=>$(e.target.value),className:"pl-10"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-2",children:[(0,a.jsxs)(i.Select,{value:Z,onValueChange:e=>q("all"===e?"":e),children:[(0,a.jsx)(i.SelectTrigger,{children:(0,a.jsx)(i.SelectValue,{placeholder:"Lead-Liste"})}),(0,a.jsxs)(i.SelectContent,{children:[(0,a.jsx)(i.SelectItem,{value:"all",children:"Alle Listen"}),V.map(e=>(0,a.jsxs)(i.SelectItem,{value:e.id,children:[e.name," ","number"==typeof e.leads_count?`(${e.leads_count})`:""]},e.id))]})]}),(0,a.jsxs)(i.Select,{value:X.region,onValueChange:e=>Y(a=>({...a,region:"all"===e?"":e})),children:[(0,a.jsx)(i.SelectTrigger,{children:(0,a.jsx)(i.SelectValue,{placeholder:"Region"})}),(0,a.jsxs)(i.SelectContent,{children:[(0,a.jsx)(i.SelectItem,{value:"all",children:"All Regions"}),(0,a.jsx)(i.SelectItem,{value:"US",children:"US"}),(0,a.jsx)(i.SelectItem,{value:"UK",children:"UK"}),(0,a.jsx)(i.SelectItem,{value:"DE",children:"DE"}),(0,a.jsx)(i.SelectItem,{value:"CA",children:"CA"})]})]}),(0,a.jsxs)(i.Select,{value:X.status,onValueChange:e=>Y(a=>({...a,status:"all"===e?"":e})),children:[(0,a.jsx)(i.SelectTrigger,{children:(0,a.jsx)(i.SelectValue,{placeholder:"Email Status"})}),(0,a.jsxs)(i.SelectContent,{children:[(0,a.jsx)(i.SelectItem,{value:"all",children:"All Status"}),(0,a.jsx)(i.SelectItem,{value:"valid",children:"Valid"}),(0,a.jsx)(i.SelectItem,{value:"invalid",children:"Invalid"}),(0,a.jsx)(i.SelectItem,{value:"unknown",children:"Unknown"})]})]}),(0,a.jsx)(r.Input,{placeholder:"Min Score",type:"number",value:X.scoreMin,onChange:e=>Y(a=>({...a,scoreMin:e.target.value}))}),(0,a.jsx)(r.Input,{placeholder:"Max Score",type:"number",value:X.scoreMax,onChange:e=>Y(a=>({...a,scoreMax:e.target.value}))}),(0,a.jsxs)(i.Select,{value:X.outreachReady,onValueChange:e=>Y(a=>({...a,outreachReady:"all"===e?"":e})),children:[(0,a.jsx)(i.SelectTrigger,{children:(0,a.jsx)(i.SelectValue,{placeholder:"Outreach Ready"})}),(0,a.jsxs)(i.SelectContent,{children:[(0,a.jsx)(i.SelectItem,{value:"all",children:"All"}),(0,a.jsx)(i.SelectItem,{value:"true",children:"Ready"}),(0,a.jsx)(i.SelectItem,{value:"false",children:"Not Ready"})]})]})]})]})})]}),(0,a.jsx)(t.Card,{children:(0,a.jsx)(t.CardContent,{className:"p-0",children:(0,a.jsx)(u.ScrollArea,{className:"h-[600px]",children:(0,a.jsxs)(c.Table,{children:[(0,a.jsx)(c.TableHeader,{children:(0,a.jsxs)(c.TableRow,{children:[(0,a.jsx)(c.TableHead,{className:"w-12",children:(0,a.jsx)(d.Checkbox,{checked:O.length===f.length&&f.length>0,onCheckedChange:e=>{z(e?f.map(e=>e.id):[])}})}),(0,a.jsx)(c.TableHead,{children:"Name"}),(0,a.jsx)(c.TableHead,{children:"Email"}),(0,a.jsx)(c.TableHead,{children:"Company"}),(0,a.jsx)(c.TableHead,{children:"Job Title"}),(0,a.jsx)(c.TableHead,{children:"Region"}),(0,a.jsx)(c.TableHead,{children:"Details"}),(0,a.jsx)(c.TableHead,{children:"Score"}),(0,a.jsx)(c.TableHead,{children:"Status"}),(0,a.jsx)(c.TableHead,{children:"Channel"}),(0,a.jsx)(c.TableHead,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(c.TableBody,{children:M?(0,a.jsx)(c.TableRow,{children:(0,a.jsxs)(c.TableCell,{colSpan:10,className:"text-center py-8",children:[(0,a.jsx)(N.RefreshCw,{className:"h-6 w-6 animate-spin mx-auto"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2",children:"Loading leads..."})]})}):0===f.length?(0,a.jsx)(c.TableRow,{children:(0,a.jsx)(c.TableCell,{colSpan:10,className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"No leads found"})})}):f.map(e=>{var l;return(0,a.jsxs)(c.TableRow,{className:"hover:bg-muted/50",children:[(0,a.jsx)(c.TableCell,{children:(0,a.jsx)(d.Checkbox,{checked:O.includes(e.id),onCheckedChange:a=>{var l;return l=e.id,void z(e=>a?[...e,l]:e.filter(e=>e!==l))}})}),(0,a.jsx)(c.TableCell,{className:"font-medium",children:e.full_name}),(0,a.jsx)(c.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(e=>{switch(e){case"valid":return(0,a.jsx)(v,{className:"h-4 w-4 text-green-500"});case"invalid":return(0,a.jsx)(y,{className:"h-4 w-4 text-red-500"});default:return(0,a.jsx)(p.Mail,{className:"h-4 w-4 text-gray-500"})}})(e.email_status),(0,a.jsx)("span",{className:"text-sm",children:e.email||"—"})]})}),(0,a.jsx)(c.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(T,{className:"h-3 w-3 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm",children:e.company||"—"})]})}),(0,a.jsx)(c.TableCell,{className:"text-sm",children:e.job_title||"—"}),(0,a.jsx)(c.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(k,{className:"h-3 w-3 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm",children:e.region||"—"})]})}),(0,a.jsx)(c.TableCell,{children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[e.website_url&&(0,a.jsx)("a",{href:e.website_url||void 0,target:"_blank",rel:"noopener noreferrer",children:(0,a.jsxs)(n.Badge,{variant:"outline",className:"hover:bg-muted",children:[(0,a.jsx)(L,{className:"h-3 w-3 mr-1"})," Website"]})}),e.phone&&(0,a.jsxs)(n.Badge,{variant:"outline",children:[(0,a.jsx)(F,{className:"h-3 w-3 mr-1"})," ",e.phone]}),("number"==typeof e.rating_avg||"number"==typeof e.rating_count)&&(0,a.jsxs)(n.Badge,{variant:"secondary",children:[(0,a.jsx)(E.Star,{className:"h-3 w-3 mr-1"}),"number"==typeof e.rating_avg?`${e.rating_avg.toFixed(1)}★`:"—","number"==typeof e.rating_count?` (${e.rating_count})`:""]})]})}),(0,a.jsx)(c.TableCell,{children:(0,a.jsx)(n.Badge,{className:(l=e.score)>=80?"text-green-600 bg-green-50":l>=50?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50",children:e.score})}),(0,a.jsx)(c.TableCell,{children:e.is_outreach_ready&&(0,a.jsx)(n.Badge,{variant:"outline",className:"text-green-600 border-green-600",children:"Ready"})}),(0,a.jsx)(c.TableCell,{children:(0,a.jsx)(n.Badge,{variant:"secondary",children:e.channel})}),(0,a.jsx)(c.TableCell,{className:"text-right",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,a.jsx)(s.Button,{variant:"ghost",size:"sm",onClick:()=>el(e),children:(0,a.jsx)(b.Edit,{className:"h-4 w-4"})}),(0,a.jsx)(s.Button,{variant:"ghost",size:"sm",onClick:()=>ep(e.id),children:(0,a.jsx)(C.Trash2,{className:"h-4 w-4"})})]})})]},e.id)})})]})})})}),(0,a.jsx)(o.Dialog,{open:!!ea,onOpenChange:()=>el(null),children:(0,a.jsxs)(o.DialogContent,{children:[(0,a.jsx)(o.DialogHeader,{children:(0,a.jsx)(o.DialogTitle,{children:"Edit Lead"})}),ea&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{htmlFor:"fullName",children:"Full Name"}),(0,a.jsx)(r.Input,{id:"fullName",value:ea.full_name,onChange:e=>el(a=>a?{...a,full_name:e.target.value}:null)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{htmlFor:"email",children:"Email"}),(0,a.jsx)(r.Input,{id:"email",type:"email",value:ea.email||"",onChange:e=>el(a=>a?{...a,email:e.target.value}:null)})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{htmlFor:"company",children:"Company"}),(0,a.jsx)(r.Input,{id:"company",value:ea.company||"",onChange:e=>el(a=>a?{...a,company:e.target.value}:null)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{htmlFor:"jobTitle",children:"Job Title"}),(0,a.jsx)(r.Input,{id:"jobTitle",value:ea.job_title||"",onChange:e=>el(a=>a?{...a,job_title:e.target.value}:null)})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{htmlFor:"region",children:"Region"}),(0,a.jsx)(r.Input,{id:"region",value:ea.region||"",onChange:e=>el(a=>a?{...a,region:e.target.value}:null)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{htmlFor:"emailStatus",children:"Email Status"}),(0,a.jsxs)(i.Select,{value:ea.email_status,onValueChange:e=>el(a=>a?{...a,email_status:e}:null),children:[(0,a.jsx)(i.SelectTrigger,{children:(0,a.jsx)(i.SelectValue,{})}),(0,a.jsxs)(i.SelectContent,{children:[(0,a.jsx)(i.SelectItem,{value:"valid",children:"Valid"}),(0,a.jsx)(i.SelectItem,{value:"invalid",children:"Invalid"}),(0,a.jsx)(i.SelectItem,{value:"unknown",children:"Unknown"})]})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(s.Button,{variant:"outline",onClick:()=>el(null),children:"Cancel"}),(0,a.jsx)(s.Button,{onClick:()=>ef(ea.id,ea),children:"Save Changes"})]})]})]})})]})}function W({onImported:e}){let[t,n]=(0,l.useState)(""),[i,c]=(0,l.useState)(""),[d,o]=(0,l.useState)(!1),m=async()=>{try{o(!0);let a={listUrl:t.trim()},l=parseInt(i);!isNaN(l)&&l>0&&(a.limit=l);let s=await (0,A.fetchWithCsrf)("/api/leads/scrapers/afag",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e?.error||"Import failed")}let r=await s.json();D.toast.success(`Importiert: ${r.imported||0} Leads`),e()}catch(e){D.toast.error(e?.message||"Import fehlgeschlagen"),console.error("AFAG import error:",e)}finally{o(!1)}};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Ausstellerlisten-URL *"}),(0,a.jsx)(r.Input,{placeholder:"https://ambiente.messefrankfurt.com/.../exhibitor-search.list.html",value:t,onChange:e=>n(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Limit (optional, nur zum Testen)"}),(0,a.jsx)(r.Input,{placeholder:"z. B. 20",value:i,onChange:e=>c(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(s.Button,{variant:"outline",onClick:()=>{n(""),c("")},disabled:d,children:"Zurücksetzen"}),(0,a.jsx)(s.Button,{onClick:m,disabled:d||!t.trim(),children:d?"Importiere...":"Import starten"})]})]})}function K({onImported:e}){let[t,n]=(0,l.useState)(""),[i,c]=(0,l.useState)(""),[d,o]=(0,l.useState)(!1),m=async()=>{try{o(!0);let a={listUrl:t.trim()},l=parseInt(i);!isNaN(l)&&l>0&&(a.limit=l);let s=await (0,A.fetchWithCsrf)("/api/leads/scrapers/koeln",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e?.error||"Import failed")}let r=await s.json();D.toast.success(`Importiert: ${r.imported||0} Leads`),e()}catch(e){D.toast.error(e?.message||"Import fehlgeschlagen"),console.error("Koeln import error:",e)}finally{o(!1)}};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Ausstellerlisten-URL *"}),(0,a.jsx)(r.Input,{placeholder:"https://www.koelnmesse.de/.../exhibitor-search.html",value:t,onChange:e=>n(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Limit (optional, nur zum Testen)"}),(0,a.jsx)(r.Input,{placeholder:"z. B. 20",value:i,onChange:e=>c(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(s.Button,{variant:"outline",onClick:()=>{n(""),c("")},disabled:d,children:"Zurücksetzen"}),(0,a.jsx)(s.Button,{onClick:m,disabled:d||!t.trim(),children:d?"Importiere...":"Import starten"})]})]})}function J({onImported:e}){let[t,n]=(0,l.useState)(""),[i,c]=(0,l.useState)(""),[d,o]=(0,l.useState)(!1),m=async()=>{try{o(!0);let a={listUrl:t.trim()},l=parseInt(i);!isNaN(l)&&l>0&&(a.limit=l);let s=await (0,A.fetchWithCsrf)("/api/leads/scrapers/messe-muenchen",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e?.error||"Import failed")}let r=await s.json();D.toast.success(`Importiert: ${r.imported||0} Leads`),e()}catch(e){D.toast.error(e?.message||"Import fehlgeschlagen"),console.error("Muenchen import error:",e)}finally{o(!1)}};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Ausstellerlisten-URL *"}),(0,a.jsx)(r.Input,{placeholder:"https://www.messe-muenchen.de/.../exhibitordetails/",value:t,onChange:e=>n(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Limit (optional, nur zum Testen)"}),(0,a.jsx)(r.Input,{placeholder:"z. B. 20",value:i,onChange:e=>c(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(s.Button,{variant:"outline",onClick:()=>{n(""),c("")},disabled:d,children:"Zurücksetzen"}),(0,a.jsx)(s.Button,{onClick:m,disabled:d||!t.trim(),children:d?"Importiere...":"Import starten"})]})]})}function G({onImported:e}){let[t,n]=(0,l.useState)(""),[i,c]=(0,l.useState)(""),[d,o]=(0,l.useState)(!1),m=async()=>{try{o(!0);let a={listUrl:t.trim()},l=parseInt(i);!isNaN(l)&&l>0&&(a.limit=l);let s=await (0,A.fetchWithCsrf)("/api/leads/scrapers/messe-berlin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e?.error||"Import failed")}let r=await s.json();D.toast.success(`Importiert: ${r.imported||0} Leads`),e()}catch(e){D.toast.error(e?.message||"Import fehlgeschlagen"),console.error("Berlin import error:",e)}finally{o(!1)}};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Ausstellerlisten-URL *"}),(0,a.jsx)(r.Input,{placeholder:"https://.../showfloor/organizations",value:t,onChange:e=>n(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Limit (optional, nur zum Testen)"}),(0,a.jsx)(r.Input,{placeholder:"z. B. 20",value:i,onChange:e=>c(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(s.Button,{variant:"outline",onClick:()=>{n(""),c("")},disabled:d,children:"Zurücksetzen"}),(0,a.jsx)(s.Button,{onClick:m,disabled:d||!t.trim(),children:d?"Importiere...":"Import starten"})]})]})}function Z(){return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Leads"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage and analyze your lead database with advanced filtering, scraping und scoring"})]}),(0,a.jsx)(P,{})]})}e.s(["default",()=>Z],952835)}]);